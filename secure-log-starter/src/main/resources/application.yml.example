# SecureHR Logging SDK Configuration Example
# Copy this to application.yml and customize

secure-hr:
  logging:
    # Enable/disable SDK
    enabled: true

    # Logging mode: SYNC, ASYNC, FALLBACK
    mode: ASYNC

    # Ring buffer size for async logging
    buffer-size: 8192

    # PII Masking Configuration
    pii-masking:
      enabled: true
      patterns:
        - rrn          # Resident Registration Number
        - credit_card  # Credit card numbers
        - password     # Passwords
        - ssn          # Social Security Number

    # Security Configuration
    security:
      # Enable encryption
      encryption-enabled: true

      # Enable Merkle Tree integrity
      integrity-enabled: true

      # AWS KMS Configuration (recommended for production)
      kms-key-id: "arn:aws:kms:ap-northeast-2:123456789012:key/your-key-id"
      kms-region: "ap-northeast-2"
      # kms-role-arn: "arn:aws:iam::123456789012:role/KmsAccessRole"  # Optional: for cross-account

      # Legacy KMS endpoint (deprecated, use AWS KMS instead)
      # kms-endpoint: "https://kms.internal/v1/keys"

      # KMS timeout in milliseconds
      kms-timeout-ms: 2000

      # Enable fallback key when KMS is unavailable (NOT for production)
      kms-fallback-enabled: false

    # Semantic Deduplication
    deduplication-enabled: true
    deduplication-window-ms: 1000

    # Kafka Configuration (primary transport)
    kafka:
      bootstrap-servers: "localhost:9092"
      topic: "secure-hr-logs"
      retries: 3
      acks: "all"
      batch-size: 16384
      linger-ms: 1
      compression-type: "zstd"
      max-block-ms: 5000
      security-protocol: "PLAINTEXT"

    # Fallback Configuration (circuit breaker)
    fallback-directory: "logs/fallback"

# Profile-specific configuration
---
spring:
  config:
    activate:
      on-profile: prod

secure-hr:
  logging:
    mode: ASYNC
    security:
      encryption-enabled: true
      integrity-enabled: true
      kms-key-id: "${AWS_KMS_KEY_ID}"
      kms-region: "${AWS_REGION:ap-northeast-2}"
      kms-fallback-enabled: false
    kafka:
      bootstrap-servers: "${KAFKA_BOOTSTRAP_SERVERS:kafka-prod:9092}"
      acks: "all"
      compression-type: "zstd"
      # For SSL/SASL authentication
      # security-protocol: "SASL_SSL"

---
spring:
  config:
    activate:
      on-profile: dev

secure-hr:
  logging:
    mode: ASYNC
    security:
      encryption-enabled: false  # Disabled for development
      integrity-enabled: true
      kms-fallback-enabled: true  # Use fallback key for local dev
    kafka:
      bootstrap-servers: "localhost:9092"
